# Активный контекст - Lysobacter RAG System

## Текущее состояние системы

### Статус развертывания
✅ **Система полностью функциональна**
- Векторная база данных создана и заполнена (8042 чанка)
- Обработано 87/88 PDF файлов успешно
- Веб-интерфейс Streamlit работает на порту 8501
- Поддержка множества LLM моделей через OpenRouter

### Последние значимые изменения
1. **Полная переиндексация завершена** (2025-06-08 02:09)
   - Обработано 88 PDF файлов 
   - Создано 8042 умных чанка
   - Средний размер чанка: 663 символа

2. **Продвинутый PDF экстрактор активен**
   - Использует PyMuPDF4LLM для текста
   - pdfplumber + tabula для таблиц
   - Умный научный чанкинг

3. **Качество извлечения улучшено**
   - Специальная обработка научных таблиц
   - Сохранение структуры документов
   - Метаданные для источников

## Текущие рабочие задачи

### Проблемы, требующие внимания
1. **Один проблемный файл**: `Lysobacter ginsengisoli.pdf` не обработался
2. **Поиск YC5194**: Штамм найден, но не все результаты содержат точное название
3. **Качество ответов**: Необходимо тестирование разных моделей

### Готовые к использованию функции
✅ Семантический поиск по базе знаний
✅ Веб-интерфейс с переключением моделей  
✅ Консольный интерфейс для быстрого тестирования
✅ Система бенчмарков для сравнения моделей
✅ Автоматическое извлечение таблиц

## Активные интеграции

### LLM модели (через OpenRouter)
- **Gemini 2.5 Flash Preview** - основная рекомендуемая модель
- **DeepSeek R1 Qwen3 8B** - экономичная модель с рассуждениями
- **DeepSeek Chat** - быстрая базовая модель
- **DeepSeek V3 Base** - сбалансированная модель

### Конфигурация системы
- Многоязычная модель эмбеддингов: `paraphrase-multilingual-MiniLM-L12-v2`
- ChromaDB коллекция: `lysobacter_knowledge_base`
- RAG_TOP_K: 10 релевантных чанков
- Температура: 0.1 для стабильных ответов

## Направления для улучшений

### Краткосрочные (готовы к реализации)
1. **Исправление проблемного PDF** - разобраться с `Lysobacter ginsengisoli.pdf`
2. **Тонкая настройка поиска YC5194** - улучшить точность поиска конкретных штаммов
3. **Расширение бенчмарков** - добавить больше тестовых вопросов

### Среднесрочные (планируются)
1. **Улучшение извлечения таблиц** - более точное распознавание научных таблиц
2. **Кэширование ответов** - для ускорения повторных запросов
3. **API эндпоинты** - для программной интеграции

### Долгосрочные (в проработке)
1. **Автоматическое обновление** - мониторинг папки для новых PDF
2. **Экспорт результатов** - в различные форматы
3. **Интеграция с внешними БД** - подключение к научным базам данных

## Метрики качества

### Производительность системы
- **Время индексации**: ~2 часа для 88 PDF файлов
- **Время поиска**: <1 секунда для семантического поиска
- **Время генерации ответа**: 2-5 секунд в зависимости от модели

### Качество данных
- **Успешность извлечения**: 98.9% (87/88 файлов)
- **Покрытие чанками**: 8042 чанка из научных документов
- **Качество метаданных**: полное для источников и страниц

## Пользовательский опыт

### Готовые интерфейсы
1. **Веб-интерфейс** (http://localhost:8501)
   - Удобное переключение моделей
   - История вопросов
   - Показ источников

2. **Консольный интерфейс**
   - Быстрое тестирование
   - Детальная информация о релевантности
   - Цветной вывод

3. **Makefile команды**
   - `make web` - запуск веб-интерфейса
   - `make test-enhanced` - быстрое тестирование
   - `make switch-*` - переключение моделей 