# Lysobacter RAG System

**Профессиональная система поиска и анализа научной литературы о лизобактериях**

Система автоматического анализа научных публикаций с поддержкой сравнительного анализа, извлечения структурированных данных и интеллектуального поиска по векторной базе знаний.

## Возможности

### Основная функциональность
- **Векторный поиск** - Семантический поиск по 8000+ фрагментов научных текстов
- **Гибридный поиск** - Комбинация векторного и текстового поиска для максимальной точности
- **Сравнительный анализ** - Автоматическое сравнение характеристик множественных видов
- **Структурированные ответы** - Генерация таблиц, заголовков и научных выводов
- **Множественные LLM модели** - Поддержка различных языковых моделей через OpenRouter

### Специализированные возможности
- **Анализ штаммов** - Детальный анализ конкретных штаммов лизобактерий
- **Морфологическое сравнение** - Сравнение морфологических характеристик видов
- **Биохимический анализ** - Извлечение и анализ биохимических данных
- **Таксономическая классификация** - Работа с таксономическими данными
- **Интеграция с BacDive** - Связь с базой данных BacDive для дополнительной информации

## Архитектура

```
├── src/lysobacter_rag/          # Основной код системы
│   ├── data_processor/          # Обработка PDF документов
│   ├── indexer/                 # Векторное индексирование
│   ├── rag_pipeline/            # RAG пайплайн и анализ
│   ├── quality_control/         # Контроль качества
│   └── utils/                   # Утилиты и интеграции
├── storage/                     # База данных ChromaDB
├── tests/                       # Система тестирования
├── examples/                    # Примеры и веб-интерфейс
├── docs/                        # Документация
└── scripts/                     # Утилиты и скрипты
```

## Быстрый старт

### Установка

1. **Клонирование репозитория:**
```bash
git clone https://github.com/ksushanik/lysobacter-rag-system.git
cd lysobacter-rag-system
```

2. **Создание виртуального окружения:**
```bash
python -m venv lysobacter_rag_env
source lysobacter_rag_env/bin/activate  # Linux/Mac
# или
lysobacter_rag_env\Scripts\activate     # Windows
```

3. **Установка зависимостей:**
```bash
pip install -r requirements.txt
```

4. **Настройка переменных окружения:**
```bash
cp .env.example .env
# Отредактируйте .env файл с вашими API ключами
```

### Конфигурация

Создайте файл `.env` с необходимыми настройками:

```env
# OpenRouter API для LLM моделей
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_MODEL=deepseek/deepseek-chat

# Дополнительные настройки
RAG_TOP_K=5
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
```

### Запуск

#### Веб-интерфейс (рекомендуется)
```bash
python run.py web
# Откройте http://localhost:8501
```

#### Интерактивный чат
```bash
python run.py chat
```

#### Управление индексом
```bash
python run.py index --status    # Проверить статус
python run.py index --rebuild   # Пересоздать индекс
```

## Использование

### Примеры запросов

**Анализ конкретного штамма:**
```
Что известно о штамме YC5194?
Какова морфология штамма GW1-59T?
```

**Сравнительный анализ:**
```
Сравните морфологические характеристики различных лизобактерий
Какие различия в условиях роста существуют между видами Lysobacter?
```

**Методологические вопросы:**
```
Объясните методы выделения лизобактерий
Как проводится анализ жирных кислот?
```

### Веб-интерфейс

Система предоставляет удобный веб-интерфейс с двумя режимами работы:

1. **Структурированный анализ** - Полный анализ с генерацией структурированных ответов
2. **Поиск источников** - Быстрый поиск релевантных документов

## Техническая информация

### Поддерживаемые модели
- **Gemini 2.5 Flash** - Высокопроизводительная модель Google
- **DeepSeek R1** - Модели рассуждений (платные и бесплатные версии)
- **DeepSeek Chat/V3** - Базовые и диалоговые модели

### База данных
- **ChromaDB** - Векторная база данных
- **Модель эмбеддингов:** paraphrase-multilingual-MiniLM-L12-v2
- **Размер базы:** 8000+ фрагментов из 87 научных публикаций

### Производительность
- **Время ответа:** 15-30 секунд для сложных запросов
- **Точность:** 64.2 балла (улучшение +32.2 балла)
- **Поддержка:** Русский и английский языки

## Тестирование

### Автоматическое тестирование
```bash
python scripts/test_improvements.py
```

### Тестирование конкретных моделей
```bash
python run.py test --model deepseek/deepseek-chat --query "YC5194"
```

### Сравнение моделей
```bash
python run.py benchmark --models deepseek/deepseek-chat google/gemini-2.5-flash-preview-05-20
```

## Структура данных

### Типы документов
- **Научные статьи** - Исследования лизобактерий
- **Таксономические описания** - Описания новых видов
- **Методологические работы** - Протоколы и методы
- **Сравнительные исследования** - Филогенетические анализы

### Извлекаемые данные
- Морфологические характеристики
- Биохимические свойства
- Условия роста
- Таксономическая информация
- Экологические данные

## Разработка

### Структура кода
```python
# Основной RAG пайплайн
from lysobacter_rag.rag_pipeline.rag_pipeline import RAGPipeline

# Инициализация системы
rag = RAGPipeline()

# Выполнение запроса
result = rag.ask_question("Ваш запрос")
print(result['answer'])
```

### Добавление новых возможностей
1. Расширение сравнительного анализатора в `src/lysobacter_rag/rag_pipeline/comparative_analyzer.py`
2. Улучшение промптов в `src/lysobacter_rag/rag_pipeline/enhanced_prompts.py`
3. Добавление новых источников данных в `src/lysobacter_rag/utils/`

## Вклад в проект

1. Форкните репозиторий
2. Создайте ветку для новой функциональности (`git checkout -b feature/new-feature`)
3. Внесите изменения и добавьте тесты
4. Убедитесь, что все тесты проходят
5. Отправьте Pull Request

## Лицензия

MIT License - см. файл [LICENSE](LICENSE) для деталей.

## Контакты

- **Автор:** ksushanik
- **Email:** ksushanik@gmail.com
- **GitHub:** [@ksushanik](https://github.com/ksushanik)

## Благодарности

- Команде ChromaDB за векторную базу данных
- OpenRouter за доступ к языковым моделям
- Научному сообществу за публикации о лизобактериях

---

**Система готова для профессионального использования в научных исследованиях лизобактерий.** 